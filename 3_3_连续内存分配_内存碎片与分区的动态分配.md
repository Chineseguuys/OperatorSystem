# 连续内存分配：内存碎片与分区的动态分配

* 内存碎片问题
* 分区的动态分配

  * 第一适配
  * 最佳适配
  * 最差适配
*   压缩式碎片整理
*   交换式碎片整理

## 内存碎片的问题

![](./img/3_3_opSystem1.png)

* 空闲内存不能被利用
* 外部碎片
  * 在分配单元间的未使用的内存
* 内部碎片
  * 在分配单元中未使用的内存

## 分区的动态分配

> 当我们的程序加载到我们的操作系统的时候，操作系统需要在物理内存中找到一段连续的内存空间给应用程序，让应用程序可以跑起来

> 在应用程序运行的过程中，应用程序需要访问一些数据，这些数据也需要分配内存空间。操作系统也要保证在应用程序请求内存的时候，可以分配一段连续的空间

![](./img/3_3_opSystem2.png)

### 首次适配

 ![](./img/3_3_opSystem3.png)

####  基本原理和实现

* 简单实现
* 需求：
  * 按地址排序的空闲块的列表
  * 分配需要寻找一个合适的分区
  * 重分配需要检查（回收的过程），看是否自由分区能够合并于相邻的空闲分区（若有）

* 优势
  * 简单
  * 易于产生更大的空闲块,向着地址空间的结尾
* 劣势
  * 外部碎片（每个使用的内存的中间可能夹杂着一些非常小的空闲块，由于这些空闲块非常的小，被使用的概率就不大）
  * 不确定性

### 最优适配

![](./img/3_3_opSystem4.png)

#### 基本原理和实现

